---
title: Reverse Proxy
description: Learn how to set up a reverse proxy for MCDash with Nginx, Apache, or Caddy
icon: 'lucide:shield'
---

## Why Use a Reverse Proxy?

Setting up a reverse proxy for MCDash provides several benefits:

- **SSL/TLS Encryption**: Secure your dashboard with HTTPS
- **Custom Domain**: Access your dashboard via a domain name instead of an IP address
- **Security**: Hide the backend port and add an extra layer of protection
- **WebSocket Support**: Properly proxy the real-time console and live updates

::alert{type="warning" icon="lucide:triangle-alert"}
**Important:** MCDash uses WebSockets for real-time features like the console. Make sure your reverse proxy configuration supports WebSocket connections.
::

## Configuration

::tabs{variant="card"}
::div{label="Nginx" icon="simple-icons:nginx"}

### Prerequisites

Install Nginx on your server:

```bash
sudo apt update
sudo apt install nginx
```

### Configuration

Create a new configuration file for MCDash:

```bash
sudo nano /etc/nginx/sites-available/mcdash
```

Add the following configuration:

```nginx
server {
    listen 80;
    server_name mcdash.yourdomain.com;

    location / {
        proxy_pass http://127.0.0.1:7867;
        proxy_http_version 1.1;
        
        # WebSocket support
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        
        # Pass original headers
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # Timeout settings for long-running connections
        proxy_read_timeout 86400;
        proxy_send_timeout 86400;
    }
}
```

Enable the site and restart Nginx:

```bash
sudo ln -s /etc/nginx/sites-available/mcdash /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

### Adding SSL with Certbot

Install Certbot and obtain a certificate:

```bash
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d mcdash.yourdomain.com
```

Certbot will automatically modify your Nginx configuration to use HTTPS.

::

::div{label="Apache" icon="simple-icons:apache"}

### Prerequisites

Install Apache and enable required modules:

```bash
sudo apt update
sudo apt install apache2
sudo a2enmod proxy proxy_http proxy_wstunnel headers rewrite ssl
```

### Configuration

Create a new configuration file:

```bash
sudo nano /etc/apache2/sites-available/mcdash.conf
```

Add the following configuration:

```apache
<VirtualHost *:80>
    ServerName mcdash.yourdomain.com
    
    ProxyPreserveHost On
    ProxyRequests Off
    
    # Regular HTTP traffic
    ProxyPass / http://127.0.0.1:7867/
    ProxyPassReverse / http://127.0.0.1:7867/
    
    # WebSocket support
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/?(.*) ws://127.0.0.1:7867/$1 [P,L]
    
    # Headers
    RequestHeader set X-Forwarded-Proto "http"
    RequestHeader set X-Forwarded-Port "80"
</VirtualHost>
```

Enable the site and restart Apache:

```bash
sudo a2ensite mcdash.conf
sudo systemctl restart apache2
```

### Adding SSL with Certbot

Install Certbot and obtain a certificate:

```bash
sudo apt install certbot python3-certbot-apache
sudo certbot --apache -d mcdash.yourdomain.com
```

After obtaining the certificate, update the `X-Forwarded-Proto` header to `https` in your configuration.

::

::div{label="Caddy" icon="simple-icons:caddy"}

### Prerequisites

Install Caddy:

```bash
sudo apt install -y debian-keyring debian-archive-keyring apt-transport-https curl
curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/gpg.key' | sudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg
curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt' | sudo tee /etc/apt/sources.list.d/caddy-stable.list
sudo apt update
sudo apt install caddy
```

### Configuration

Edit the Caddyfile:

```bash
sudo nano /etc/caddy/Caddyfile
```

Add the following configuration:

```caddyfile
mcdash.yourdomain.com {
    reverse_proxy 127.0.0.1:7867
}
```

Restart Caddy:

```bash
sudo systemctl restart caddy
```

That's it! Caddy automatically handles SSL certificates, WebSocket upgrades, and header forwarding. It's the simplest option for setting up a reverse proxy.

::

::div{label="Traefik" icon="simple-icons:traefikproxy"}

### Docker Compose Configuration

If you're using Traefik with Docker, add the following labels to your MCDash container:

```yaml
services:
  mcdash:
    image: your-mcdash-image
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.mcdash.rule=Host(`mcdash.yourdomain.com`)"
      - "traefik.http.routers.mcdash.entrypoints=websecure"
      - "traefik.http.routers.mcdash.tls.certresolver=letsencrypt"
      - "traefik.http.services.mcdash.loadbalancer.server.port=7867"
```

### Static Configuration (File Provider)

Create a configuration file:

```yaml
http:
  routers:
    mcdash:
      rule: "Host(`mcdash.yourdomain.com`)"
      service: mcdash
      entryPoints:
        - websecure
      tls:
        certResolver: letsencrypt

  services:
    mcdash:
      loadBalancer:
        servers:
          - url: "http://127.0.0.1:7867"
```

::
::

## Firewall Configuration

After setting up a reverse proxy, you should block direct access to port 7867 from external networks:

::tabs{variant="card"}
::div{label="UFW" icon="lucide:shield"}

```bash
# Allow HTTP/HTTPS
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# Block external access to MCDash port (allow only localhost)
sudo ufw deny 7867/tcp

# Enable the firewall
sudo ufw enable
```

::

::div{label="iptables" icon="lucide:terminal"}

```bash
# Allow localhost access to port 7867
sudo iptables -A INPUT -p tcp -s 127.0.0.1 --dport 7867 -j ACCEPT

# Drop all other connections to port 7867
sudo iptables -A INPUT -p tcp --dport 7867 -j DROP

# Save the rules
sudo iptables-save | sudo tee /etc/iptables/rules.v4
```

::
::

## Troubleshooting

### WebSocket Connection Failed

If the console or real-time features aren't working:

1. **Check your proxy configuration** - Ensure WebSocket upgrade headers are being passed correctly
2. **Verify timeout settings** - WebSocket connections need long timeouts
3. **Check browser console** - Look for WebSocket connection errors

### 502 Bad Gateway

If you're getting a 502 error:

1. **Verify MCDash is running** - Check if the dashboard is accessible at `http://localhost:7867`
2. **Check the proxy pass URL** - Ensure the backend URL is correct
3. **Review logs** - Check your reverse proxy logs for more details:
   ```bash
   # Nginx
   sudo tail -f /var/log/nginx/error.log
   
   # Apache
   sudo tail -f /var/log/apache2/error.log
   
   # Caddy
   sudo journalctl -u caddy -f
   ```

### SSL Certificate Issues

If you're having trouble with SSL:

1. **Check DNS** - Ensure your domain points to your server's IP
2. **Verify ports** - Port 80 and 443 must be open for Certbot validation
3. **Check certificate status**:
   ```bash
   sudo certbot certificates
   ```
